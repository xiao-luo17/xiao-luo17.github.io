<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>C/C++实现的音乐播放器 | 小罗の小窝</title><meta name="keywords" content="C/C++,小项目"><meta name="author" content="Xiao Luo"><meta name="copyright" content="Xiao Luo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="ffffff"><meta name="description" content="一款基于C&#x2F;C++的音乐播放器，结合了easyx图形库。实现了一些比较基础的播放功能，仿制了网易云音乐播放页">
<meta property="og:type" content="article">
<meta property="og:title" content="C&#x2F;C++实现的音乐播放器">
<meta property="og:url" content="http://example.com/2022/07/18/C%E5%AE%9E%E7%8E%B0%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/index.html">
<meta property="og:site_name" content="小罗の小窝">
<meta property="og:description" content="一款基于C&#x2F;C++的音乐播放器，结合了easyx图形库。实现了一些比较基础的播放功能，仿制了网易云音乐播放页">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/img/Random(38).jpg">
<meta property="article:published_time" content="2022-07-18T12:46:25.000Z">
<meta property="article:modified_time" content="2022-07-29T10:00:27.814Z">
<meta property="article:author" content="Xiao Luo">
<meta property="article:tag" content="C&#x2F;C++">
<meta property="article:tag" content="小项目">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/Random(38).jpg"><link rel="shortcut icon" href="/img/avatar.jpg"><link rel="canonical" href="http://example.com/2022/07/18/C%E5%AE%9E%E7%8E%B0%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":400,"position":"top","messagePrev":"这篇文章已经有","messageNext":"天没有更新过了, 可能有一些错误, 可以去小窝其他地方看看噢."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Xiao Luo","link":"链接: ","source":"来源: 小罗の小窝","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#F08080","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'C/C++实现的音乐播放器',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-07-29 18:00:27'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', 'ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/iconfont/font_01/iconfont.css"><meta name="generator" content="Hexo 6.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休息室</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-fish"></i><span> 摸鱼</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://guozhivip.com/fun/2048/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 2048</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://www.minesweeper.cn/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 扫雷</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://www.ip33.com/rubik/index.html"><i class="fa-fw fa-solid fa-gamepad"></i><span> 3D魔方</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xiabor.com/mikutap/"><i class="fa-fw fa-solid fa-gamepad"></i><span> Mikutap</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xiabor.com/dot/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 动态字符</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw iconfont icon-dakaixinxi"></i><span> 信箱</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background: transparent"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">小罗の小窝</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 休息室</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/bangumis/"><i class="fa-fw fas fa-video"></i><span> 番剧</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa-solid fa-fish"></i><span> 摸鱼</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="http://guozhivip.com/fun/2048/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 2048</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://www.minesweeper.cn/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 扫雷</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="http://www.ip33.com/rubik/index.html"><i class="fa-fw fa-solid fa-gamepad"></i><span> 3D魔方</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xiabor.com/mikutap/"><i class="fa-fw fa-solid fa-gamepad"></i><span> Mikutap</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://xiabor.com/dot/"><i class="fa-fw fa-solid fa-gamepad"></i><span> 动态字符</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw iconfont icon-dakaixinxi"></i><span> 信箱</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">C/C++实现的音乐播放器</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-18T12:46:25.000Z" title="发表于 2022-07-18 20:46:25">2022-07-18</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-29T10:00:27.814Z" title="更新于 2022-07-29 18:00:27">2022-07-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Java/">Java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span id="" data-flag-title="C/C++实现的音乐播放器"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="取名字-玉玉云音乐播放器"><a href="#取名字-玉玉云音乐播放器" class="headerlink" title="取名字: 玉玉云音乐播放器"></a>取名字: 玉玉云音乐播放器</h1><p>就叫玉玉云音乐播放器吧（组长起的名。。）</p>
<p><strong>玉玉云Github项目传送门 &#x3D;&#x3D;&gt;</strong> <a target="_blank" rel="noopener" href="https://github.com/xiao-luo17/Music-Player"><code>xiao-luo17/Music-Player: 一个基于C/C++的音乐播放器</code></a></p>
<p><del>悄咪咪发布一手，这篇应该没人看的</del></p>
<h2 id="项目需求"><a href="#项目需求" class="headerlink" title="项目需求"></a>项目需求</h2><ul>
<li><p><strong>一个功能齐全的音乐播放器包括但不限于以下几点：</strong></p>
<ul>
<li>完成基础的播放&#x2F;暂停、切歌、倍速播放、快进&#x2F;快退、循环播放</li>
<li>能够实现指定文件读取MP3文件</li>
<li>批量导入MP3文件，并可以指定编号增删音乐列表中的音乐</li>
</ul>
</li>
<li><p>之后我们希望能够实现一个功能：读取文件夹中的音乐MP3文件，这样用户就可以在文件夹中直接指定自己想播放的音乐。同时希望用户做出选择时可以弹出文件资源管理器进行选择</p>
<ul>
<li>读取到的MP3文件存储在播放列表中，这样可以方便的从链表中获取到文件的路径和文件名等信息</li>
<li>使用可视化的图形界面进行操作，包括文件资源管理器的弹窗</li>
</ul>
</li>
</ul>
<h2 id="项目记录"><a href="#项目记录" class="headerlink" title="项目记录"></a>项目记录</h2><div class="note danger flat"><p>项目时间戳</p>
</div>

<div class="timeline undefined"><div class='timeline-item headline'><div class='timeline-item-title'><div class='item-circle'><p>2022</p>
</div></div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-11</p>
</div></div><div class='timeline-item-content'><p>C语言项目规范、统一编码风格。被说困了属于是。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-12</p>
</div></div><div class='timeline-item-content'><p>初步实现播放&#x2F;暂停、循环播放、快进快退、倍速播放、自定义播放位置功能，对未来的功能添加开放了很多可扩展的接口</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-13</p>
</div></div><div class='timeline-item-content'><p>完成几乎所有播放音乐的基本功能，实现不包含音频文件读取功能的音乐播放列表，可以自由进行切歌操作（此时仍需要在播放列表中指定文件），以及进度条的显示。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-14</p>
</div></div><div class='timeline-item-content'><p>实现使用文件资源管理器指定读取MP3文件信息到播放列表，通过链表存储。基本完成完整的基于控制台音乐播放器的所有逻辑。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-15</p>
</div></div><div class='timeline-item-content'><p>发现只有逻辑还是太拉了，决定做可视化页面。痛苦选择方向，mfc和qt摇摆不定，拖了一天决定还是采用easyx图形库，简单好用。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-16</p>
</div></div><div class='timeline-item-content'><p>界面开始越来越接近网易云音乐，实现了进度条的无缝刷新。实现歌曲列表的界面，解决easyx界面刷新和进度条刷新的矛盾。</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-17</p>
</div></div><div class='timeline-item-content'><p>添加网易云热评，加入关于页，实现播放模式的切换</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-18</p>
</div></div><div class='timeline-item-content'><p>完成音量加减逻辑和日志打印</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-19</p>
</div></div><div class='timeline-item-content'><p>今日无事</p>
</div></div><div class='timeline-item'><div class='timeline-item-title'><div class='item-circle'><p>07-20</p>
</div></div><div class='timeline-item-content'><p>今日无事</p>
</div></div></div>

<h2 id="项目基础"><a href="#项目基础" class="headerlink" title="项目基础"></a>项目基础</h2><p>基于windows的一款音乐播放器</p>
<p><strong>学习了解mciSendString函数：</strong></p>
<ul>
<li><p>采取mciSendString这个windows上的API，有关参数详情请参见文档</p>
</li>
<li><p>快速访问&#x3D;&#x3D;&gt;<a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/previous-versions/dd757161%28v=vs.85%29"><code>WindowsAPImciSendString文档传送门</code></a></p>
</li>
<li><p>API设计参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_40571533/article/details/104393805">xiaoxiao涛的博客-CSDN博客_c++播放音乐</a></p>
</li>
<li><p>项目结构参考<a target="_blank" rel="noopener" href="https://github.com/Cybercalf/HwcPlayer">Cybercalf&#x2F;HwcPlayer: 四川大学2021年暑期实训项目-音乐播放器 </a></p>
</li>
</ul>
<p><strong>有关链表的增删改查操作、文件读写操作、UI的设计、<del>MFC库</del>easyx库</strong></p>
<h2 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h2><ol>
<li><p>基于Windows控制台C程序的音乐播放器其实是通过调用Windows上的一些API实现的，那就只需要通过函数对mciSendString传输字符串参数为命令控制Windows程序播放MP3文件。</p>
</li>
<li><p>基于这个想法，可以对音乐播放器的各个功能模块在原生API的基础上再加工，封装成一个个小demo，然后再做一个简陋的界面去操控。</p>
</li>
<li><p>那么一切合理了起来：也就是说相当于把各种本来要手打的命令行变成按钮或者键盘输入字符，按一下就往这里面输出一些命令，也就能实现音乐播放器了。<strong>但是</strong></p>
<ul>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题来了
  </button><span class="hide-content">文件不可能飞过来让你使用，那么该怎么读取呢？</span></span>
</li>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题来了
  </button><span class="hide-content">有没有办法可以指定文件读取？批量导入？</span></span></li>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题来了
  </button><span class="hide-content">既然要读取，那么用什么东西来装它呢？</span></span></li>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题来了
  </button><span class="hide-content">装进去了能不能删除、增添、改变？</span></span></li>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题来了
  </button><span class="hide-content">能不能读取装进去之后里面的信息？</span></span></li>
</ul>
</li>
<li><p>（显然）由题可知，我们可以使用链表作为这种数据结构（数据量不大），方便完成各种操作。那链表存储可以实现了，文件又怎么读取呢？</p>
</li>
<li><p>那当然是采用直接呼出文件资源管理器的方式去读取文件的路径，这个的实现我们之后再说，这样也更加友好和人性化，有图形界面的操作手感</p>
<ul>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题又来了
  </button><span class="hide-content">文件读取的时候总是读取失败是为什么</span></span></li>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题又来了
  </button><span class="hide-content">通过断点发现文件路径参数是正确的，为什么mci无法成功播放呢？</span></span></li>
<li><span class="hide-inline"><button type="button" class="hide-button" style="background-color: #F08080;color: #fff">问题又来了
  </button><span class="hide-content">呼出管理器后操作返回数据为空有没有处理？</span></span></li>
</ul>
</li>
<li><p>所以，需求里难弄的的东西来了。图形界面，用C做图形界面，完全陌生的领域。摆在面前的有种选择：</p>
<ul>
<li>Easyx.h图形库</li>
<li>MFC框架</li>
<li>QT框架</li>
<li>WPF框架</li>
</ul>
<p>这些都是在C环境下做UI的好点子。但是MFC太拉了，UI奇丑，代码可读性差的离谱。人家微软自己都放弃了我还用吗（其实是太难不会）。QT可以说是功能强大齐全，但是学习成本高，或者说一个小播放器还不至于用QT，有点大材小用。WPF是基于C#的。</p>
<p>那么综上所述，我们组采取Easyx.h图形库方案，UI这种东西全靠审美。审美上去了拿什么做都好看，也就是说只要你会PS，界面这种东西不成问题，靠队友的时候到了。</p>
</li>
<li><p>那么这时根据需求，我们所有的技术选择都已经齐全，可以开始着手写代码了。</p>
</li>
</ol>
<ul>
<li>HwcPlayer中有一个很不错的点子，把要用的所有include全写在一个头文件里每个都引一次，很不错的想法，懒人必备噢。</li>
</ul>
<h3 id="UI背后的逻辑问题"><a href="#UI背后的逻辑问题" class="headerlink" title="UI背后的逻辑问题"></a>UI背后的逻辑问题</h3><ul>
<li>函数接收什么样的参数？</li>
<li>命令都是什么样的？</li>
<li>如何组合字符串成为一个命令？</li>
<li>如何读取文件并输入到播放列表中？</li>
<li>每一个功能需要几个API？</li>
<li>什么是alias别名？如何通过别名简化命令？</li>
<li>这些API尽可能多地能组成什么样的功能？</li>
<li><del>所以。。有谁会做UI吗？</del>还是决定自己做吧</li>
</ul>
<h4 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h4><h5 id="mci函数参数"><a href="#mci函数参数" class="headerlink" title="mci函数参数"></a><strong>mci函数参数</strong></h5><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MCIERROR <span class="title function_">mciSendString</span><span class="params">(</span></span><br><span class="line"><span class="params">　　　　　　LPCTSTR lpszCommand, 　　 <span class="comment">//MCI命令字符串</span></span></span><br><span class="line"><span class="params">　　　　　　LPTSTR lpszReturnString, <span class="comment">//存放反馈信息的缓冲区</span></span></span><br><span class="line"><span class="params">　　　　　　UINT cchReturn,          <span class="comment">//缓冲区的长度</span></span></span><br><span class="line"><span class="params">　　　　　　HANDLE hwndCallback 　<span class="comment">//回调窗口的句柄，一般为NULL</span></span></span><br><span class="line"><span class="params">)</span>; <span class="comment">//若成功则返回0，否则返回错误码。</span></span><br></pre></td></tr></table></figure>

<h5 id="MCI命令"><a href="#MCI命令" class="headerlink" title="MCI命令"></a><strong>MCI命令</strong></h5><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">open</td>
<td align="center">打开设备</td>
</tr>
<tr>
<td align="center">close</td>
<td align="center">关闭设备</td>
</tr>
<tr>
<td align="center">play</td>
<td align="center">开始设备播放</td>
</tr>
<tr>
<td align="center">stop</td>
<td align="center">停止设备的播放或记录</td>
</tr>
<tr>
<td align="center">record</td>
<td align="center">开始记录</td>
</tr>
<tr>
<td align="center">save</td>
<td align="center">保存设备内容</td>
</tr>
<tr>
<td align="center">pause</td>
<td align="center">暂停设备的播放或记录</td>
</tr>
<tr>
<td align="center">resume</td>
<td align="center">恢复暂停播放或记录的设备</td>
</tr>
<tr>
<td align="center">seek</td>
<td align="center">改变媒体的当前位置</td>
</tr>
<tr>
<td align="center">status</td>
<td align="center">查询设备状态信息</td>
</tr>
<tr>
<td align="center">capacility</td>
<td align="center">查询设备能力</td>
</tr>
<tr>
<td align="center">info</td>
<td align="center">查询设备的信息</td>
</tr>
</tbody></table>
<h5 id="将字符串相互拼接产生可以被系统理解的MCI指令"><a href="#将字符串相互拼接产生可以被系统理解的MCI指令" class="headerlink" title="将字符串相互拼接产生可以被系统理解的MCI指令"></a><strong>将字符串相互拼接产生可以被系统理解的MCI指令</strong></h5><ul>
<li>strcpy和strcat任君选择</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">strcpy</span>: <span class="type">char</span> *<span class="title function_">strcpy</span><span class="params">(<span class="type">char</span>* dest, <span class="type">const</span> <span class="type">char</span> *src)</span>;</span><br><span class="line"><span class="comment">//把从src地址开始且含有NULL结束符的字符串复制到以dest开始的地址空间</span></span><br><span class="line"><span class="comment">//src和dest所指内存区域不可以重叠且dest必须有足够的空间来容纳src的字符串</span></span><br><span class="line"><span class="comment">//返回指向dest的 指针。</span></span><br><span class="line"><span class="built_in">strcat</span>: <span class="keyword">extern</span> <span class="type">char</span> *<span class="title function_">strcat</span><span class="params">(<span class="type">char</span> *dest, <span class="type">const</span> <span class="type">char</span> *src)</span>;</span><br><span class="line"><span class="comment">//把src所指字符串添加到dest结尾处(覆盖dest结尾处的&#x27;\0&#x27;)</span></span><br></pre></td></tr></table></figure>

<h5 id="呼出文件资源管理器实现读取文件路径并存放到指定链表节点"><a href="#呼出文件资源管理器实现读取文件路径并存放到指定链表节点" class="headerlink" title="呼出文件资源管理器实现读取文件路径并存放到指定链表节点"></a><strong>呼出文件资源管理器实现读取文件路径并存放到指定链表节点</strong></h5><ul>
<li>需要注意最下方链表插入的路径不能为空，加一个if判断防止插入空数据报错</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">add</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    TCHAR szBuffer[MAX_PATH] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	OPENFILENAME file = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	file.hwndOwner = <span class="literal">NULL</span>;</span><br><span class="line">	file.lStructSize = <span class="keyword">sizeof</span>(file);</span><br><span class="line">	file.lpstrFilter = <span class="string">&quot;*文件(*.*)\0*.*\0&quot;</span>;<span class="comment">//要选择的文件后缀</span></span><br><span class="line">	file.lpstrFile = szBuffer;<span class="comment">//存放文件的缓冲区</span></span><br><span class="line">	file.nMaxFile = <span class="keyword">sizeof</span>(szBuffer) / <span class="keyword">sizeof</span>(*szBuffer);</span><br><span class="line">	file.nFilterIndex = <span class="number">0</span>;</span><br><span class="line">	file.Flags = OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST | OFN_EXPLORER;<span class="comment">//标志如果是多选要加上OFN_ALLOWMULTISELECT</span></span><br><span class="line">	BOOL bSel = GetOpenFileName(&amp;file);</span><br><span class="line">	Media* music = createMedia(file.lpstrFile);<span class="comment">//创建的链表</span></span><br><span class="line">	<span class="keyword">if</span> (music != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		headInsert(<span class="built_in">list</span>, *music);</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="获取播放信息和播放位置"><a href="#获取播放信息和播放位置" class="headerlink" title="获取播放信息和播放位置"></a><strong>获取播放信息和播放位置</strong></h5><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">解释</th>
</tr>
</thead>
<tbody><tr>
<td align="center">“status movie position”</td>
<td align="center">播放位置</td>
</tr>
<tr>
<td align="center">“status movie length”</td>
<td align="center">播放总长度</td>
</tr>
<tr>
<td align="center">“status movie mode”</td>
<td align="center">播放状态</td>
</tr>
<tr>
<td align="center">“seek movie to “</td>
<td align="center">指定位置</td>
</tr>
<tr>
<td align="center">“seek movie to start”</td>
<td align="center">定位到开头位置</td>
</tr>
<tr>
<td align="center">“seek movie to end”</td>
<td align="center">定位到最后位置</td>
</tr>
</tbody></table>
<h5 id="alias别名"><a href="#alias别名" class="headerlink" title="alias别名"></a><strong>alias别名</strong></h5><ul>
<li><p>为长命令设置别名更有助于写代码</p>
</li>
<li><p><strong>由于对MCI的操作实际上就是命令操作，所以可以通过设置别名来进行操作mcisendstring函数</strong></p>
</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@doskey ls=dir /b $*</span><br><span class="line">@doskey l=dir /od/p/q/tw $*</span><br><span class="line"><span class="comment">//命令 alias 别名</span></span><br><span class="line">@REM notepad++工具设置别名为：npp</span><br><span class="line">@doskey npp=<span class="string">&quot;C:\Program Files1\Notepad++\notepad++.exe&quot;</span> $   </span><br></pre></td></tr></table></figure>

<h3 id="一些难点（许是太菜了）"><a href="#一些难点（许是太菜了）" class="headerlink" title="一些难点（许是太菜了）"></a>一些难点（许是太菜了）</h3><ul>
<li><del>控制台页面时期的双缓冲刷新</del>已经是过去式了</li>
<li>文件读取路径包含空格无法读取</li>
<li>通过呼出文件资源对话框实现导入文件（上文已提到）</li>
<li>对话框式导入文件和easyx界面刷新冲突</li>
<li>如何通过图片实现伪造的按钮特效</li>
<li>easyx图形界面的进度条和刷新页面的矛盾</li>
</ul>
<h4 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h4><h5 id="双缓冲原理有些复杂，命令行使用一个更简单的方案"><a href="#双缓冲原理有些复杂，命令行使用一个更简单的方案" class="headerlink" title="双缓冲原理有些复杂，命令行使用一个更简单的方案"></a><strong>双缓冲原理有些复杂，命令行使用一个更简单的方案</strong></h5><ul>
<li>这种刷新是通过“不刷新”实现的，当字符在相同位置更新的时候会出现上一次未刷新而字符重叠的现象。可以通过使用长空白字符覆盖未刷新区域来实现“伪刷新”</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//消除cls频闪函数</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">cls</span><span class="params">()</span> &#123;</span><br><span class="line">	HANDLE hConsole = GetStdHandle(STD_OUTPUT_HANDLE);</span><br><span class="line">	COORD coordScreen = &#123; <span class="number">0</span>, <span class="number">0</span> &#125;;    <span class="comment">// home for the cursor</span></span><br><span class="line">	SetConsoleCursorPosition(hConsole, coordScreen);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="MCI文件路径空格问题"><a href="#MCI文件路径空格问题" class="headerlink" title="MCI文件路径空格问题"></a>MCI文件路径空格问题</h5><ul>
<li>mci读取文件的路径如果包含空格需要采用双引号包住整个路径</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">openMusic</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* url)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (url != <span class="literal">NULL</span>) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">char</span> cmd[<span class="number">500</span>] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		strcpy_s(cmd, <span class="string">&quot;open \&quot;&quot;</span>);<span class="comment">//引号需要被转义</span></span><br><span class="line">		strcat_s(cmd, url);</span><br><span class="line">		strcat_s(cmd, <span class="string">&quot;\&quot;&quot;</span>);<span class="comment">//引号需要被转义</span></span><br><span class="line">		strcat_s(cmd, <span class="string">&quot; alias MyMusic&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (mciSendStringUtil(cmd, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="对话框式导入文件和easyx界面刷新冲突"><a href="#对话框式导入文件和easyx界面刷新冲突" class="headerlink" title="对话框式导入文件和easyx界面刷新冲突"></a>对话框式导入文件和easyx界面刷新冲突</h5><ul>
<li>一个奇怪的bug，最后通过绝对路径解决，有大佬知道问题的可以评论区见</li>
</ul>
<ol>
<li>执行如下呼出文件资源管理器代码后正常</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">	TCHAR szBuffer[MAX_PATH] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	OPENFILENAME file = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	file.hwndOwner = <span class="literal">NULL</span>;</span><br><span class="line">	file.lStructSize = <span class="keyword">sizeof</span>(file);</span><br><span class="line">	file.lpstrFilter = <span class="string">&quot;*文件(*.*)\0*.*\0&quot;</span>;<span class="comment">//要选择的文件后缀</span></span><br><span class="line">	file.lpstrFile = szBuffer;<span class="comment">//存放文件的缓冲区</span></span><br><span class="line">	file.nMaxFile = <span class="keyword">sizeof</span>(szBuffer) / <span class="keyword">sizeof</span>(*szBuffer);</span><br><span class="line">	file.nFilterIndex = <span class="number">0</span>;</span><br><span class="line">	file.Flags = OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST | OFN_EXPLORER;<span class="comment">//标志如果是多选要加上OFN_ALLOWMULTISELECT</span></span><br><span class="line">	BOOL bSel = GetOpenFileName(&amp;file);</span><br><span class="line">	Media* music = createMedia(file.lpstrFile);</span><br><span class="line">	<span class="keyword">if</span> (music != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		headInsert(<span class="built_in">list</span>, *music);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>再执行刷新界面</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HWND hwnd = initgraph(<span class="number">720</span>, <span class="number">960</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//或者屏幕刷新等类似函数</span></span><br><span class="line">loadimage(&amp;play2, <span class="string">&quot;.\\*.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">loadimage(&amp;pause, <span class="string">&quot;.\\*.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>结果：页面变黑，有鼠标点击事件，图片无法加载</li>
</ul>
<ol start="3">
<li>解决方案：所有加载的图片都指定绝对路径</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">loadimage(&amp;play2, <span class="string">&quot;D:\\visual studio project\\Project_List\\Project_List\\picture\\*.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">loadimage(&amp;pause, <span class="string">&quot;D:\\visual studio project\\Project_List\\Project_List\\picture\\*.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br></pre></td></tr></table></figure>

<h5 id="伪造按钮特效"><a href="#伪造按钮特效" class="headerlink" title="伪造按钮特效"></a>伪造按钮特效</h5><ul>
<li>提前准备好两张透明背景的png图片，执行鼠标点击动作时两种不同颜色的图层依次刷新，就可以实现鼠标点击的伪动态效果</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">transimg</span><span class="params">(IMAGE* dstimg, <span class="type">int</span> x, <span class="type">int</span> y, IMAGE* srcimg)</span></span><br><span class="line">&#123;</span><br><span class="line">	HDC dstDC = GetImageHDC(dstimg);</span><br><span class="line">	HDC srcDC = GetImageHDC(srcimg);</span><br><span class="line">	<span class="type">int</span> w = srcimg-&gt;getwidth();</span><br><span class="line">	<span class="type">int</span> h = srcimg-&gt;getheight();</span><br><span class="line">	BLENDFUNCTION bf = &#123; AC_SRC_OVER, <span class="number">0</span>, <span class="number">255</span>, AC_SRC_ALPHA &#125;;</span><br><span class="line">	<span class="comment">//半透明位图</span></span><br><span class="line">	AlphaBlend(dstDC, x, y, w, h, srcDC, <span class="number">0</span>, <span class="number">0</span>, w, h, bf);</span><br><span class="line">&#125;</span><br><span class="line">transimg(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;IMAGE);<span class="comment">//一种颜色的按钮</span></span><br><span class="line">Sleep(<span class="number">100</span>);</span><br><span class="line">transimg(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;IMAGE);<span class="comment">//另一种颜色的按钮</span></span><br></pre></td></tr></table></figure>

<h5 id="进度条的制作"><a href="#进度条的制作" class="headerlink" title="进度条的制作"></a>进度条的制作</h5><ul>
<li>刷新页面与刷新进度条</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//进度条</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    t = getMusicLength();</span><br><span class="line">		t1 = getMusicPosition();</span><br><span class="line">		<span class="keyword">if</span> (t != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            c = t1 / t;</span><br><span class="line">        &#125;</span><br><span class="line">		progress_length = c * <span class="number">523</span> + <span class="number">90</span>;</span><br><span class="line">		fillroundrect(<span class="number">90</span>, <span class="number">830</span>, progress_length, <span class="number">825</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="模块化设计"><a href="#模块化设计" class="headerlink" title="模块化设计"></a>模块化设计</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/CMusic.jpg"></p>
<div class="tabs" id="模块"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#模块-1">ListPage: 文件操作</button></li><li class="tab"><button type="button" data-href="#模块-2">FileToList: 文件读取逻辑模块</button></li><li class="tab"><button type="button" data-href="#模块-3">playerWindow: 播放器界面</button></li><li class="tab"><button type="button" data-href="#模块-4">Util: 工具集</button></li><li class="tab"><button type="button" data-href="#模块-5">all.h: 全局头</button></li><li class="tab"><button type="button" data-href="#模块-6">menuPage: 菜单页和关于页</button></li><li class="tab"><button type="button" data-href="#模块-7">main: 函数的入口</button></li><li class="tab"><button type="button" data-href="#模块-8">listmenu: 歌曲列表页</button></li><li class="tab"><button type="button" data-href="#模块-9">playerPage: 一个曾经的控制台废案，被包含在程序里了</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="模块-1"><p><strong>ListPage.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;all.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;wtypes.h&gt;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">add</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getNumOfNode</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getName</span><span class="params">(<span class="type">int</span> num)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getPath</span><span class="params">(<span class="type">int</span> num)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">del</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printList</span><span class="params">()</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>ListPage.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ListPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;FileToList.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;wtypes.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerWindow.h&quot;</span></span></span><br><span class="line">mediaNode* <span class="built_in">list</span> = createList();</span><br><span class="line"><span class="type">void</span> <span class="title function_">add</span><span class="params">()</span> &#123;</span><br><span class="line">	</span><br><span class="line">	TCHAR szBuffer[MAX_PATH] = &#123; <span class="number">0</span> &#125;;</span><br><span class="line">	OPENFILENAME file = &#123; <span class="number">0</span> &#125;;</span><br><span class="line"></span><br><span class="line">	file.hwndOwner = <span class="literal">NULL</span>;</span><br><span class="line">	file.lStructSize = <span class="keyword">sizeof</span>(file);</span><br><span class="line">	file.lpstrFilter = <span class="string">&quot;mp3文件(*.mp3)\0*.mp3\0&quot;</span>;<span class="comment">//要选择的文件后缀</span></span><br><span class="line">	file.lpstrFile = szBuffer;<span class="comment">//存放文件的缓冲区</span></span><br><span class="line">	file.nMaxFile = <span class="keyword">sizeof</span>(szBuffer) / <span class="keyword">sizeof</span>(*szBuffer);</span><br><span class="line">	file.nFilterIndex = <span class="number">0</span>;</span><br><span class="line">	file.Flags = OFN_PATHMUSTEXIST | OFN_FILEMUSTEXIST | OFN_EXPLORER;<span class="comment">//标志如果是多选要加上OFN_ALLOWMULTISELECT</span></span><br><span class="line">	BOOL bSel = GetOpenFileName(&amp;file);</span><br><span class="line">	Media* music = createMedia(file.lpstrFile);</span><br><span class="line">	<span class="keyword">if</span> (music != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		headInsert(<span class="built_in">list</span>, *music);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getNumOfNode</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line">	mediaNode* pMove = <span class="built_in">list</span>-&gt;next;</span><br><span class="line">	<span class="keyword">while</span> (pMove != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		num++;</span><br><span class="line">		pMove = pMove-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//传入编号和主函数和链表返回歌曲名字</span></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getName</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="type">char</span> name[<span class="number">200</span>];</span><br><span class="line">	mediaNode* pMove = <span class="built_in">list</span>-&gt;next;</span><br><span class="line">	<span class="keyword">if</span> (pMove == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="type">char</span>*)<span class="string">&quot;等待播放列表暂时还没有歌曲噢&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (pMove != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (num == pMove-&gt;num) &#123;</span><br><span class="line">			strcpy_s(name, <span class="keyword">sizeof</span>(name), pMove-&gt;media.name);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		pMove = pMove-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">getPath</span><span class="params">(<span class="type">int</span> num)</span> &#123;</span><br><span class="line">	<span class="type">char</span> path[<span class="number">200</span>];</span><br><span class="line">	mediaNode* pMove = <span class="built_in">list</span>-&gt;next;</span><br><span class="line">	<span class="keyword">while</span> (pMove != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		<span class="keyword">if</span> (num == pMove-&gt;num) &#123;</span><br><span class="line">			strcpy_s(path, <span class="keyword">sizeof</span>(path), pMove-&gt;media.path);</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		pMove = pMove-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> path;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printList</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	mediaNode* pMove = <span class="built_in">list</span>-&gt;next;</span><br><span class="line">	<span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (pMove != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		printtext(<span class="number">320</span>,<span class="number">60</span>+i, pMove-&gt;media.name);</span><br><span class="line">		pMove = pMove-&gt;next;</span><br><span class="line">		i += <span class="number">60</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">del</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	deleteNode(<span class="built_in">list</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-2"><p><strong>所有针对文件读取的操作（耦合播放列表的CRUD）：</strong></p>
<p><strong>FileToList.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;io.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Media</span> &#123;</span></span><br><span class="line">	<span class="type">char</span> name[<span class="number">200</span>]; <span class="comment">//歌曲名字</span></span><br><span class="line">	<span class="type">char</span> path[<span class="number">500</span>]; <span class="comment">//绝对路径</span></span><br><span class="line">	<span class="type">char</span> short_path[<span class="number">500</span>]; <span class="comment">//短路径</span></span><br><span class="line">	<span class="type">int</span> length;     <span class="comment">//时长</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">mediaNode</span> &#123;</span></span><br><span class="line">	Media media;</span><br><span class="line">	<span class="type">int</span> num;        <span class="comment">//编号</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">mediaNode</span>* <span class="title">pre</span>;</span></span><br><span class="line">	<span class="class"><span class="keyword">struct</span> <span class="title">mediaNode</span>* <span class="title">next</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">mediaNode* <span class="title function_">createList</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">mediaNode* <span class="title function_">createNode</span><span class="params">(Media music)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">headInsert</span><span class="params">(mediaNode* headNode, Media music)</span>;</span><br><span class="line"></span><br><span class="line">Media* <span class="title function_">createMedia</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteNode</span><span class="params">(mediaNode* headNode)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>FileToList.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;FileToList.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">mediaNode* <span class="title function_">createList</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	mediaNode* headNode = (mediaNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(mediaNode));</span><br><span class="line">	headNode-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	headNode-&gt;pre = <span class="literal">NULL</span>;</span><br><span class="line">	headNode-&gt;num = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> headNode;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//创建结点</span></span><br><span class="line">mediaNode* <span class="title function_">createNode</span><span class="params">(Media music)</span> </span><br><span class="line">&#123;</span><br><span class="line">	mediaNode* newNode = (mediaNode*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(mediaNode));</span><br><span class="line">	newNode-&gt;media = music;</span><br><span class="line">	newNode-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	newNode-&gt;pre = <span class="literal">NULL</span>;</span><br><span class="line">	newNode-&gt;num = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> newNode;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//从头部插入结点</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">headInsert</span><span class="params">(mediaNode* headNode, Media music)</span> </span><br><span class="line">&#123;</span><br><span class="line">	mediaNode* node = createNode(music);</span><br><span class="line">	node-&gt;media = music;</span><br><span class="line">	<span class="keyword">if</span> (headNode-&gt;next == <span class="literal">NULL</span>) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">//链表为空</span></span><br><span class="line">		node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">		node-&gt;pre = headNode;</span><br><span class="line">		headNode-&gt;next = node;</span><br><span class="line">		node-&gt;num = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; node-&gt;next != <span class="literal">NULL</span>; i++) </span><br><span class="line">		&#123;</span><br><span class="line">			node = node-&gt;next;</span><br><span class="line">			node-&gt;num = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span> </span><br><span class="line">	&#123;</span><br><span class="line">		node-&gt;pre = headNode;</span><br><span class="line">		node-&gt;next = headNode-&gt;next;</span><br><span class="line">		headNode-&gt;next-&gt;pre = node;</span><br><span class="line">		headNode-&gt;next = node;</span><br><span class="line">		node-&gt;num = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">2</span>; node-&gt;next != <span class="literal">NULL</span>; i++) </span><br><span class="line">		&#123;</span><br><span class="line">			node = node-&gt;next;</span><br><span class="line">			node-&gt;num = i;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Media* <span class="title function_">createMedia</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* path)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="class"><span class="keyword">struct</span> _<span class="title">finddata_t</span>* <span class="title">musicInfo</span> =</span> (<span class="keyword">struct</span> <span class="type">_finddata_t</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <span class="type">_finddata_t</span>));</span><br><span class="line">	<span class="type">long</span> handle = _findfirst(path, musicInfo);</span><br><span class="line">	<span class="keyword">if</span> (handle == <span class="number">-1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">NULL</span>; <span class="comment">//未找到文件则返回NULL</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// 为新建的Media结构体分配一块内存</span></span><br><span class="line">		Media* newMedia = (Media*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(Media));</span><br><span class="line">		<span class="comment">// 初始化Media结构体中的参数</span></span><br><span class="line">		strcpy_s(newMedia-&gt;name, <span class="keyword">sizeof</span>(newMedia-&gt;name), musicInfo-&gt;name);</span><br><span class="line">		strcpy_s(newMedia-&gt;path, <span class="keyword">sizeof</span>(newMedia-&gt;path), path);</span><br><span class="line">		<span class="keyword">return</span> newMedia;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//尾部删除结点</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteNode</span><span class="params">(mediaNode* headNode)</span> &#123;</span><br><span class="line">	mediaNode* node = headNode-&gt;next;</span><br><span class="line">	<span class="keyword">if</span> (node == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">while</span> (node-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		node = node-&gt;next;</span><br><span class="line">	&#125;</span><br><span class="line">	node-&gt;pre-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">	<span class="built_in">free</span>(node);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-3"><p><strong>playerWindow.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;all.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;util.h&quot;</span></span></span><br><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&quot;ListPage.h&quot;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">createWindow</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">fundmantual</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">printtext</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y, <span class="type">char</span> text[<span class="number">100</span>])</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">getnum</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">setnum</span><span class="params">(<span class="type">int</span> n)</span>;</span><br></pre></td></tr></table></figure>

<p><strong>playerWindow.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerWindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;menuPage.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> nowName[<span class="number">100</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放模式全局枚举</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PLAY_STATUS</span> <span class="title">play_mode</span> =</span> STATUS_PLAY_SEQUENCE;</span><br><span class="line"><span class="type">char</span> play_status[<span class="number">1000</span>];</span><br><span class="line"><span class="comment">// 播放状态全局枚举</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">STATUS</span> <span class="title">status</span> =</span> STATUS_STOPPED;</span><br><span class="line"><span class="type">char</span> status_now[<span class="number">1000</span>];</span><br><span class="line"><span class="type">int</span> num = <span class="number">0</span>;</span><br><span class="line"><span class="type">int</span> progress_length = <span class="number">90</span>;<span class="comment">//进度条长度</span></span><br><span class="line"><span class="type">double</span> t = <span class="number">0</span>;</span><br><span class="line"><span class="type">double</span> t1 = <span class="number">0</span>;</span><br><span class="line"><span class="type">double</span> c = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">createWindow</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	initgraph(<span class="number">720</span>, <span class="number">960</span>,<span class="number">0</span>);</span><br><span class="line">	<span class="type">char</span> a[<span class="number">1000</span>] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="built_in">strcpy</span>(a, getPath(num));</span><br><span class="line"></span><br><span class="line">	openMusic(a);</span><br><span class="line">	</span><br><span class="line">	setbkcolor(WHITE);</span><br><span class="line"></span><br><span class="line">	change();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置背景图片</span></span><br><span class="line">	IMAGE image;</span><br><span class="line">	loadimage(&amp;image, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\background.png&quot;</span>);</span><br><span class="line">	putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;image);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>,<span class="number">0</span>, <span class="number">0</span>, &amp;image);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//暂停按钮</span></span><br><span class="line">	IMAGE pause;</span><br><span class="line">	IMAGE play2;</span><br><span class="line">	IMAGE play;</span><br><span class="line">	loadimage(&amp;play2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\play2.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">	loadimage(&amp;pause, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\play.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;pause);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//上一曲图标</span></span><br><span class="line">	IMAGE last;</span><br><span class="line">	loadimage(&amp;last, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\last.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	IMAGE last2;</span><br><span class="line">	loadimage(&amp;last2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\last2.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">194</span>, <span class="number">666</span>, &amp;last);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//下一曲图标</span></span><br><span class="line">	IMAGE next;</span><br><span class="line">	loadimage(&amp;next, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\next.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	IMAGE next2;</span><br><span class="line">	loadimage(&amp;next2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\next2.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">498</span>, <span class="number">671</span>, &amp;next);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//改模式图标</span></span><br><span class="line">	IMAGE change;</span><br><span class="line">	loadimage(&amp;change, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\change.png&quot;</span>,<span class="number">30</span>,<span class="number">30</span>);</span><br><span class="line">	IMAGE change2;</span><br><span class="line">	loadimage(&amp;change2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\change2.png&quot;</span>,<span class="number">30</span>,<span class="number">30</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">92</span>, <span class="number">678</span>, &amp;change);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//快进图标</span></span><br><span class="line">	IMAGE up;</span><br><span class="line">	loadimage(&amp;up, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\up.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	IMAGE up2;</span><br><span class="line">	loadimage(&amp;up2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\up2.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">618</span>, <span class="number">748</span>, &amp;up);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//快退图标</span></span><br><span class="line">	IMAGE down;</span><br><span class="line">	loadimage(&amp;down, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\down.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	IMAGE down2;</span><br><span class="line">	loadimage(&amp;down2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\down2.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">94</span>, <span class="number">748</span>, &amp;down);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//音量加图标</span></span><br><span class="line">	IMAGE add1;</span><br><span class="line">	loadimage(&amp;add1, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2;</span><br><span class="line">	loadimage(&amp;add2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">170</span>, <span class="number">870</span>, &amp;add1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//音量减少图标</span></span><br><span class="line">	IMAGE add1_lr;</span><br><span class="line">	loadimage(&amp;add1_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2_lr;</span><br><span class="line">	loadimage(&amp;add2_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">230</span>, <span class="number">870</span>, &amp;add1_lr);</span><br><span class="line"></span><br><span class="line">	IMAGE back;</span><br><span class="line">	loadimage(&amp;back, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\back.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">15</span>, <span class="number">12</span>, &amp;back);</span><br><span class="line"></span><br><span class="line">	IMAGE circle;</span><br><span class="line">	loadimage(&amp;circle, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\BREATHE.png&quot;</span>, <span class="number">340</span>, <span class="number">340</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">110</span>, <span class="number">40</span>, &amp;circle);</span><br><span class="line"></span><br><span class="line">	IMAGE issue;</span><br><span class="line">	loadimage(&amp;issue, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\issue.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">608</span>, <span class="number">675</span>, &amp;issue);</span><br><span class="line"></span><br><span class="line">	setbkmode(TRANSPARENT);<span class="comment">//设置文字输出时背景为透明</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)<span class="comment">//要用个循环来不断监测鼠标事件</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">strcpy</span>(nowName, getName(num));</span><br><span class="line">		printtext(<span class="number">242</span>, <span class="number">755</span>, nowName);</span><br><span class="line">		printtext(<span class="number">91</span>, <span class="number">598</span>, play_status);	</span><br><span class="line"></span><br><span class="line">		<span class="comment">//进度条</span></span><br><span class="line">		t = getMusicLength();</span><br><span class="line">		t1 = getMusicPosition();</span><br><span class="line">		<span class="keyword">if</span> (t != <span class="number">0</span>)</span><br><span class="line">			c = t1 / t;</span><br><span class="line">		progress_length = c * <span class="number">523</span> + <span class="number">90</span>;</span><br><span class="line">		fillroundrect(<span class="number">90</span>, <span class="number">830</span>, progress_length, <span class="number">825</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (MouseHit())</span><br><span class="line">		&#123;</span><br><span class="line">			MOUSEMSG msg = GetMouseMsg();</span><br><span class="line">			<span class="keyword">switch</span> (msg.uMsg)</span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">334</span> &amp;&amp; msg.x &lt;= <span class="number">412</span> &amp;&amp; msg.y &lt;= <span class="number">732</span> &amp;&amp; msg.y &gt;= <span class="number">652</span>)<span class="comment">//播放按钮</span></span><br><span class="line">				&#123;</span><br><span class="line">					printtext(<span class="number">2222</span>, <span class="number">755</span>, getName(num));</span><br><span class="line">					printtext(<span class="number">91</span>, <span class="number">598</span>, play_status);</span><br><span class="line">					<span class="built_in">strcpy</span>(a, (<span class="type">const</span> <span class="type">char</span>*)getPath(num));<span class="comment">//传歌曲路径</span></span><br><span class="line">					openMusic(a);</span><br><span class="line">					<span class="keyword">if</span> (status == STATUS_STOPPED)</span><br><span class="line">					&#123;</span><br><span class="line"></span><br><span class="line">						transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;play2);<span class="comment">//灰色的按钮</span></span><br><span class="line">						Sleep(<span class="number">100</span>);</span><br><span class="line">						transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;pause);</span><br><span class="line">						playMusic();</span><br><span class="line">						status = STATUS_PLAY;</span><br><span class="line">						<span class="built_in">strcpy</span>(status_now, <span class="string">&quot;正在播放中&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (status == STATUS_PLAY)</span><br><span class="line">					&#123;</span><br><span class="line">						transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;play2);<span class="comment">//灰色的按钮</span></span><br><span class="line">						Sleep(<span class="number">100</span>);</span><br><span class="line">						transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;pause);</span><br><span class="line">						pauseMusic();</span><br><span class="line">						status = STATUS_PAUSE;</span><br><span class="line">						<span class="built_in">strcpy</span>(status_now, <span class="string">&quot;暂停中&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (status == STATUS_PAUSE)</span><br><span class="line">					&#123;</span><br><span class="line">						transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;play2);<span class="comment">//灰色的按钮</span></span><br><span class="line">						Sleep(<span class="number">100</span>);</span><br><span class="line">						transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;pause);</span><br><span class="line">						resumeMusic();</span><br><span class="line">						status = STATUS_PLAY;</span><br><span class="line">						<span class="built_in">strcpy</span>(status_now, <span class="string">&quot;正在播放中&quot;</span>);</span><br><span class="line">					&#125;</span><br><span class="line"></span><br><span class="line">				&#125;<span class="comment">//点击播放键</span></span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">202</span> &amp;&amp; msg.x &lt;= <span class="number">236</span> &amp;&amp; msg.y &lt;= <span class="number">709</span> &amp;&amp; msg.y &gt;= <span class="number">676</span>)<span class="comment">//上一首</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">194</span>, <span class="number">666</span>, &amp;last2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">194</span>, <span class="number">666</span>, &amp;last);</span><br><span class="line">					<span class="keyword">if</span> (num &gt; <span class="number">1</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						num -= <span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">//处理逻辑</span></span><br><span class="line">					fillroundrect(<span class="number">96</span>, <span class="number">830</span>, <span class="number">613</span>, <span class="number">825</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">					closeMusic();</span><br><span class="line">					fundmantual();</span><br><span class="line">	</span><br><span class="line">					printtext(<span class="number">91</span>, <span class="number">598</span>, play_status);</span><br><span class="line">					<span class="built_in">strcpy</span>(a, (<span class="type">const</span> <span class="type">char</span>*)getPath(num));<span class="comment">//传歌曲路径</span></span><br><span class="line"></span><br><span class="line">					openMusic(a);</span><br><span class="line">					playMusic();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">506</span> &amp;&amp; msg.x &lt;= <span class="number">542</span> &amp;&amp; msg.y &lt;= <span class="number">711</span> &amp;&amp; msg.y &gt;= <span class="number">676</span>)<span class="comment">//下一首</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">498</span>, <span class="number">671</span>, &amp;next2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">498</span>, <span class="number">671</span>, &amp;next);</span><br><span class="line">					<span class="keyword">if</span> (num &lt; getNumOfNode())</span><br><span class="line">					&#123;</span><br><span class="line">						num += <span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					fillroundrect(<span class="number">96</span>, <span class="number">830</span>, <span class="number">613</span>, <span class="number">825</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">					closeMusic();</span><br><span class="line">					fundmantual();</span><br><span class="line"></span><br><span class="line">					printtext(<span class="number">91</span>, <span class="number">598</span>, play_status);</span><br><span class="line">					<span class="built_in">strcpy</span>(a, (<span class="type">const</span> <span class="type">char</span>*)getPath(num));<span class="comment">//传歌曲路径</span></span><br><span class="line"></span><br><span class="line">					openMusic(a);</span><br><span class="line">					playMusic();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">618</span> &amp;&amp; msg.x &lt;= <span class="number">654</span> &amp;&amp; msg.y &lt;= <span class="number">784</span> &amp;&amp; msg.y &gt;= <span class="number">748</span>)<span class="comment">//快进</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">618</span>, <span class="number">748</span>, &amp;up2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">618</span>, <span class="number">748</span>, &amp;up);</span><br><span class="line">					<span class="comment">//处理逻辑</span></span><br><span class="line">					upTo10s();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">94</span> &amp;&amp; msg.x &lt;= <span class="number">130</span> &amp;&amp; msg.y &lt;= <span class="number">784</span> &amp;&amp; msg.y &gt;= <span class="number">748</span>)<span class="comment">//快退</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">94</span>, <span class="number">748</span>, &amp;down2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">94</span>, <span class="number">748</span>, &amp;down);</span><br><span class="line">					<span class="comment">//处理逻辑</span></span><br><span class="line">					downTo10s();</span><br><span class="line">					fundmantual();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="comment">//三种播放模式</span></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">92</span> &amp;&amp; msg.x &lt;= <span class="number">122</span> &amp;&amp; msg.y &lt;= <span class="number">708</span> &amp;&amp; msg.y &gt;= <span class="number">678</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">92</span>, <span class="number">678</span>, &amp;change2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">92</span>, <span class="number">678</span>, &amp;change);</span><br><span class="line">					<span class="keyword">if</span> (play_mode == STATUS_PLAY_SEQUENCE)</span><br><span class="line">					&#123;</span><br><span class="line">						play_mode = STATUS_PLAY_RANDOM;</span><br><span class="line">						<span class="built_in">strcpy</span>(play_status, <span class="string">&quot;当前播放状态:  随机播放&quot;</span>);</span><br><span class="line">						fundmantual();</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (play_mode == STATUS_PLAY_RANDOM)</span><br><span class="line">					&#123;</span><br><span class="line">						play_mode = STATUS_PLAY_REPEAT;</span><br><span class="line">						<span class="built_in">strcpy</span>(play_status, <span class="string">&quot;当前播放状态:  循环播放&quot;</span>);</span><br><span class="line">						fundmantual();</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">else</span> <span class="keyword">if</span> (play_mode == STATUS_PLAY_REPEAT)</span><br><span class="line">					&#123;</span><br><span class="line">						play_mode = STATUS_PLAY_SEQUENCE;</span><br><span class="line">						<span class="built_in">strcpy</span>(play_status, <span class="string">&quot;当前播放状态:  列表播放&quot;</span>);</span><br><span class="line">						fundmantual();</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (getMusicLength() == getMusicPosition() &amp;&amp; play_mode == STATUS_PLAY_SEQUENCE)<span class="comment">//列表播放状态的逻辑</span></span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">if</span> (num &gt; <span class="number">1</span>)</span><br><span class="line">					&#123;</span><br><span class="line">						num -= <span class="number">1</span>;</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="comment">//处理逻辑</span></span><br><span class="line">					fillroundrect(<span class="number">96</span>, <span class="number">830</span>, <span class="number">613</span>, <span class="number">825</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">					closeMusic();</span><br><span class="line">					fundmantual();</span><br><span class="line">					printtext(<span class="number">91</span>, <span class="number">598</span>, play_status);</span><br><span class="line">					<span class="built_in">strcpy</span>(a, (<span class="type">const</span> <span class="type">char</span>*)getPath(num));<span class="comment">//传歌曲路径</span></span><br><span class="line"></span><br><span class="line">					openMusic(a);</span><br><span class="line">					playMusic();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (getMusicLength() == getMusicPosition() &amp;&amp; play_mode == STATUS_PLAY_REPEAT)</span><br><span class="line">				&#123;</span><br><span class="line">					fundmantual();</span><br><span class="line">					playMusicRepeat();</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (getMusicLength() == getMusicPosition() &amp;&amp; play_mode == STATUS_PLAY_SEQUENCE)</span><br><span class="line">				&#123;</span><br><span class="line"></span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">15</span> &amp;&amp; msg.x &lt;= <span class="number">45</span> &amp;&amp; msg.y &lt;= <span class="number">42</span> &amp;&amp; msg.y &gt;= <span class="number">12</span>)<span class="comment">//返回</span></span><br><span class="line">				&#123;</span><br><span class="line">					closegraph();</span><br><span class="line">					menu();</span><br><span class="line"></span><br><span class="line">				&#125;<span class="comment">//点击返回</span></span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">170</span> &amp;&amp; msg.x &lt;= <span class="number">210</span> &amp;&amp; msg.y &lt;= <span class="number">910</span> &amp;&amp; msg.y &gt;= <span class="number">870</span>)<span class="comment">//加音量</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">170</span>, <span class="number">870</span>, &amp;add2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">170</span>, <span class="number">870</span>, &amp;add1);</span><br><span class="line">					addVolume();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">230</span> &amp;&amp; msg.x &lt;= <span class="number">270</span> &amp;&amp; msg.y &lt;= <span class="number">910</span> &amp;&amp; msg.y &gt;= <span class="number">870</span>)<span class="comment">//减音量</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">230</span>, <span class="number">870</span>, &amp;add2_lr);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">230</span>, <span class="number">870</span>, &amp;add1_lr);</span><br><span class="line">					lowVolume();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">608</span> &amp;&amp; msg.x &lt;= <span class="number">644</span> &amp;&amp; msg.y &lt;= <span class="number">711</span> &amp;&amp; msg.y &gt;= <span class="number">675</span>)<span class="comment">//网易云热评</span></span><br><span class="line">				&#123;</span><br><span class="line"></span><br><span class="line">				<span class="comment">/*	transparentimage(NULL, 608, 675, &amp;issue);*/</span></span><br><span class="line">					<span class="comment">//处理逻辑</span></span><br><span class="line">					WinExec(<span class="string">&quot;C:\\Program Files\\Internet Explorer\\IExplore.exe https://www.musicbooks.cn/&quot;</span>, <span class="number">1</span>);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (getMusicLength() == getMusicPosition() &amp;&amp; play_mode == STATUS_PLAY_SEQUENCE &amp;&amp; num &gt; <span class="number">0</span>)<span class="comment">//列表播放状态的逻辑</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">if</span> (num &gt; <span class="number">1</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				num -= <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//处理逻辑</span></span><br><span class="line">			fillroundrect(<span class="number">96</span>, <span class="number">830</span>, <span class="number">613</span>, <span class="number">825</span>, <span class="number">10</span>, <span class="number">10</span>);</span><br><span class="line">			closeMusic();</span><br><span class="line">			fundmantual();</span><br><span class="line">			printtext(<span class="number">91</span>, <span class="number">598</span>, play_status);</span><br><span class="line">			<span class="built_in">strcpy</span>(a, (<span class="type">const</span> <span class="type">char</span>*)getPath(num));<span class="comment">//传歌曲路径</span></span><br><span class="line">			openMusic(a);</span><br><span class="line">			playMusic();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (getMusicLength() == getMusicPosition() &amp;&amp; play_mode == STATUS_PLAY_REPEAT &amp;&amp; num &gt; <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			playMusicRepeat();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span> (getMusicLength() == getMusicPosition() &amp;&amp; play_mode == STATUS_PLAY_SEQUENCE &amp;&amp; num &gt; <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">		<span class="comment">/*	printf(&quot;随机播放&quot;);*/</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">fundmantual</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	initgraph(<span class="number">720</span>, <span class="number">960</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="type">char</span> a[<span class="number">1000</span>] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="built_in">strcpy</span>(a, getPath(num));</span><br><span class="line"></span><br><span class="line">	openMusic(a);</span><br><span class="line">	setbkcolor(WHITE);</span><br><span class="line"></span><br><span class="line">	change();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//设置背景图片</span></span><br><span class="line">	IMAGE image;</span><br><span class="line">	loadimage(&amp;image, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\background.png&quot;</span>);</span><br><span class="line">	putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;image);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>, &amp;image);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//暂停按钮</span></span><br><span class="line">	IMAGE pause;</span><br><span class="line">	IMAGE play2;</span><br><span class="line">	IMAGE play;</span><br><span class="line">	loadimage(&amp;play2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\play2.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">	loadimage(&amp;pause, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\play.png&quot;</span>, <span class="number">81</span>, <span class="number">81</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">334</span>, <span class="number">652</span>, &amp;pause);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//上一曲图标</span></span><br><span class="line">	IMAGE last;</span><br><span class="line">	loadimage(&amp;last, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\last.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	IMAGE last2;</span><br><span class="line">	loadimage(&amp;last2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\last2.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">194</span>, <span class="number">666</span>, &amp;last);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//下一曲图标</span></span><br><span class="line">	IMAGE next;</span><br><span class="line">	loadimage(&amp;next, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\next.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	IMAGE next2;</span><br><span class="line">	loadimage(&amp;next2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\next2.png&quot;</span>, <span class="number">50</span>, <span class="number">50</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">498</span>, <span class="number">671</span>, &amp;next);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//改模式图标</span></span><br><span class="line">	IMAGE change;</span><br><span class="line">	loadimage(&amp;change, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\change.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">	IMAGE change2;</span><br><span class="line">	loadimage(&amp;change2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\change2.png&quot;</span>,<span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">92</span>, <span class="number">678</span>, &amp;change);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//快进图标</span></span><br><span class="line">	IMAGE up;</span><br><span class="line">	loadimage(&amp;up, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\up.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	IMAGE up2;</span><br><span class="line">	loadimage(&amp;up2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\up2.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">618</span>, <span class="number">748</span>, &amp;up);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//快退图标</span></span><br><span class="line">	IMAGE down;</span><br><span class="line">	loadimage(&amp;down, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\down.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	IMAGE down2;</span><br><span class="line">	loadimage(&amp;down2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\down2.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">94</span>, <span class="number">748</span>, &amp;down);</span><br><span class="line"></span><br><span class="line">	IMAGE back;</span><br><span class="line">	loadimage(&amp;back, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\back.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">15</span>, <span class="number">12</span>, &amp;back);</span><br><span class="line"></span><br><span class="line">	IMAGE circle;</span><br><span class="line">	loadimage(&amp;circle, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\BREATHE.png&quot;</span>, <span class="number">340</span>, <span class="number">340</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">110</span>, <span class="number">40</span>, &amp;circle);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//音量加图标</span></span><br><span class="line">	IMAGE add1;</span><br><span class="line">	loadimage(&amp;add1, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2;</span><br><span class="line">	loadimage(&amp;add2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">170</span>, <span class="number">870</span>, &amp;add1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//音量减少图标</span></span><br><span class="line">	IMAGE add1_lr;</span><br><span class="line">	loadimage(&amp;add1_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2_lr;</span><br><span class="line">	loadimage(&amp;add2_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">230</span>, <span class="number">870</span>, &amp;add1_lr);</span><br><span class="line"></span><br><span class="line">	IMAGE issue;</span><br><span class="line">	loadimage(&amp;issue, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\issue.png&quot;</span>, <span class="number">36</span>, <span class="number">36</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">608</span>, <span class="number">675</span>, &amp;issue);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">char</span>* <span class="title function_">attainlength</span><span class="params">(<span class="type">int</span> time)</span> &#123;</span><br><span class="line">	<span class="type">int</span> fen = <span class="number">0</span>;</span><br><span class="line">	<span class="type">int</span> miao = <span class="number">0</span>;</span><br><span class="line">	miao = (<span class="type">int</span>)time / <span class="number">1000</span>;</span><br><span class="line">	fen = (<span class="type">int</span>)miao / <span class="number">60</span>;</span><br><span class="line">	miao = (<span class="type">int</span>)miao - fen * <span class="number">60</span>;</span><br><span class="line">	<span class="type">char</span> f[<span class="number">100</span>];<span class="comment">//分</span></span><br><span class="line">	<span class="type">char</span> m[<span class="number">100</span>];<span class="comment">//秒</span></span><br><span class="line">	<span class="type">char</span> tatol[<span class="number">100</span>];<span class="comment">//总的</span></span><br><span class="line">	itoa(miao, m, <span class="number">10</span>);</span><br><span class="line">	itoa(fen, f, <span class="number">10</span>);</span><br><span class="line">	<span class="built_in">strcpy</span>(tatol, f);</span><br><span class="line">	<span class="built_in">strcat</span>(tatol, <span class="string">&quot; : &quot;</span>);</span><br><span class="line">	<span class="keyword">if</span> (miao &lt; <span class="number">10</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">strcat</span>(tatol, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">strcat</span>(tatol, m);</span><br><span class="line">	<span class="keyword">return</span> tatol;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">printtext</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y,<span class="type">char</span> text[<span class="number">100</span>])</span></span><br><span class="line">&#123;</span><br><span class="line">	settextcolor(WHITE);</span><br><span class="line">	setbkmode(TRANSPARENT);<span class="comment">//设置文字输出时背景为透明</span></span><br><span class="line">	outtextxy(x, y, text);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getnum</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setnum</span><span class="params">(<span class="type">int</span> n)</span></span><br><span class="line">&#123;</span><br><span class="line">	num = n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-4"><p><strong>定义大多数常用接口：</strong></p>
<p><strong>util.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;all.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 代表三种不同的播放模式</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">PLAY_STATUS</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	STATUS_PLAY_SEQUENCE = <span class="number">0</span>,</span><br><span class="line">	STATUS_PLAY_REPEAT,</span><br><span class="line">	STATUS_PLAY_RANDOM,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 代表当前音乐的播放状态</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">STATUS</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">	STATUS_PLAY = <span class="number">0</span>,</span><br><span class="line">	STATUS_PAUSE,</span><br><span class="line">	STATUS_STOPPED,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过MCI接口API指令操作音乐文件</span></span><br><span class="line"><span class="comment">// 成功: return 0</span></span><br><span class="line"><span class="comment">// 失败: return !=0</span></span><br><span class="line"><span class="comment">// returnString: 返回错误字符串信息</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">mciSendStringUtil</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* url, <span class="type">char</span>* returnString)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打开设备: 默认MP3</span></span><br><span class="line"><span class="comment">// 通过MCI接口API指令操作音乐文件</span></span><br><span class="line"><span class="comment">// 其中mciSendString指令被封装于mciSendStringUtil中</span></span><br><span class="line"><span class="comment">// 通过open字符串拼接传参并赋予别名&quot;MyMusic&quot;</span></span><br><span class="line"><span class="comment">// 后续相同操作只需指明别名</span></span><br><span class="line"><span class="comment">// 成功: return 0</span></span><br><span class="line"><span class="comment">// 失败: return !=0</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">openMusic</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* url)</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以下函数中将包含MyMusic别名</span></span><br><span class="line"><span class="comment">// 通过别名对mciSendString接口传参</span></span><br><span class="line"><span class="comment">// 即包含了open命令:</span></span><br><span class="line"><span class="comment">// 定义open设备操作为MyMusic</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设备开始播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">playMusic</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备暂停播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">pauseMusic</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备继续播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">resumeMusic</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备停止播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">stopMusic</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备重复播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">playMusicRepeat</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备关闭</span></span><br><span class="line"><span class="comment">// 设备关闭接口，而非音乐停止接口</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">closeMusic</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回当前播放位置</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getMusicPosition</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回播放音乐的总长度</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getMusicLength</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置指定播放位置</span></span><br><span class="line"><span class="comment">// 通过外部传参position实现</span></span><br><span class="line"><span class="comment">// 执行&quot;seek 别名 to 位置&quot;指令</span></span><br><span class="line"><span class="comment">// 使音乐到达指定位置:</span></span><br><span class="line"><span class="comment">// 参数说明: </span></span><br><span class="line"><span class="comment">// //任意位置: position</span></span><br><span class="line"><span class="comment">// //定位音乐开头位置: start</span></span><br><span class="line"><span class="comment">// //定位音乐最后位置: end</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">gotoPosition</span><span class="params">(<span class="type">int</span> position)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getMusicSpeed</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setMusicSpeed</span><span class="params">(<span class="type">int</span> speed)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">transparentimage</span><span class="params">(IMAGE* dstimg, <span class="type">int</span> x, <span class="type">int</span> y, IMAGE* srcimg)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">change</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">addVolume</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">lowVolume</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//集成绝大多数MCI的API指令封装为简单的接口</span></span><br><span class="line"><span class="comment">// mci集成工具集: util.cpp</span></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure>

<p><strong>util.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;util.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;graphics.h&gt;</span></span></span><br><span class="line"></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过MCI接口API指令操作音乐文件</span></span><br><span class="line"><span class="comment">// 成功: return 0</span></span><br><span class="line"><span class="comment">// 失败: return !=0</span></span><br><span class="line"><span class="comment">// returnString: 返回错误字符串信息</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">mciSendStringUtil</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* url, <span class="type">char</span>* returnString)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (url == <span class="literal">NULL</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="number">0</span> != mciSendString(url, <span class="literal">NULL</span>, <span class="number">0</span>, <span class="literal">NULL</span>))</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">else</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span> (<span class="number">0</span> != mciSendString(url, returnString, <span class="number">1024</span>, <span class="literal">NULL</span>)) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">-2</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//打开设备: 默认MP3</span></span><br><span class="line"><span class="comment">// 通过MCI接口API指令操作音乐文件</span></span><br><span class="line"><span class="comment">// 其中mciSendString指令被封装于mciSendStringUtil中</span></span><br><span class="line"><span class="comment">// 通过open字符串拼接传参并赋予别名&quot;MyMusic&quot;</span></span><br><span class="line"><span class="comment">// 后续相同操作只需指明别名</span></span><br><span class="line"><span class="comment">// 成功: return 0</span></span><br><span class="line"><span class="comment">// 失败: return !=0</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">openMusic</span><span class="params">(<span class="type">const</span> <span class="type">char</span>* url)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span> (url != <span class="literal">NULL</span>) </span><br><span class="line">	&#123;</span><br><span class="line">		<span class="type">char</span> cmd[<span class="number">500</span>] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">		strcpy_s(cmd, <span class="string">&quot;open \&quot;&quot;</span>);</span><br><span class="line">		strcat_s(cmd, url);</span><br><span class="line">		strcat_s(cmd, <span class="string">&quot;\&quot;&quot;</span>);</span><br><span class="line">		strcat_s(cmd, <span class="string">&quot; alias MyMusic&quot;</span>);</span><br><span class="line">		<span class="keyword">if</span> (mciSendStringUtil(cmd, <span class="literal">NULL</span>) == <span class="number">0</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//以下函数中将包含MyMusic别名</span></span><br><span class="line"><span class="comment">// 通过别名对mciSendString接口传参</span></span><br><span class="line"><span class="comment">// 即包含了open命令:</span></span><br><span class="line"><span class="comment">// 定义open设备操作为MyMusic</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//设备开始播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">playMusic</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">500</span>] = <span class="string">&quot;play MyMusic&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备暂停播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">pauseMusic</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">500</span>] = <span class="string">&quot;pause MyMusic&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备继续播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">resumeMusic</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">500</span>] = <span class="string">&quot;resume MyMusic&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备停止播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">stopMusic</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">500</span>] = <span class="string">&quot;stop MyMusic&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备重复播放音乐</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">playMusicRepeat</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">1000</span>] = <span class="string">&quot;play MyMusic repeat&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设备关闭</span></span><br><span class="line"><span class="comment">// 设备关闭接口，而非音乐停止接口</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">closeMusic</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">1000</span>] = <span class="string">&quot;close MyMusic&quot;</span>;</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回当前播放位置</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getMusicPosition</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> szTimeBuffer[<span class="number">1024</span>];</span><br><span class="line">	mciSendStringUtil(<span class="string">&quot;status MyMusic position&quot;</span>, szTimeBuffer);</span><br><span class="line">	<span class="keyword">return</span> atoi(szTimeBuffer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//返回播放音乐的总长度</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">getMusicLength</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> szTimeBuffer[<span class="number">1024</span>];</span><br><span class="line">	mciSendStringUtil(<span class="string">&quot;status MyMusic length&quot;</span>, szTimeBuffer);</span><br><span class="line">	<span class="keyword">return</span> atoi(szTimeBuffer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置指定播放位置</span></span><br><span class="line"><span class="comment">// 通过外部传参position实现</span></span><br><span class="line"><span class="comment">// 执行&quot;seek 别名 to 位置&quot;指令</span></span><br><span class="line"><span class="comment">// 使音乐到达指定位置:</span></span><br><span class="line"><span class="comment">// 参数说明: </span></span><br><span class="line"><span class="comment">// //任意位置: position</span></span><br><span class="line"><span class="comment">// //定位音乐开头位置: start</span></span><br><span class="line"><span class="comment">// //定位音乐最后位置: end</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">gotoPosition</span><span class="params">(<span class="type">int</span> position)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">1000</span>] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="built_in">sprintf</span>(cmd, <span class="string">&quot;seek MyMusic to %d&quot;</span>, position);</span><br><span class="line">	<span class="keyword">return</span> mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">getMusicSpeed</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> szSpeedBuffer[<span class="number">1024</span>];</span><br><span class="line">	mciSendStringUtil(<span class="string">&quot;status MyMusic speed&quot;</span>, szSpeedBuffer);</span><br><span class="line">	<span class="keyword">return</span> atoi(szSpeedBuffer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">setMusicSpeed</span><span class="params">(<span class="type">int</span> speed)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> cmd[<span class="number">1000</span>] = <span class="string">&quot;&quot;</span>;</span><br><span class="line">	<span class="built_in">sprintf</span>(cmd, <span class="string">&quot;set MyMusic speed %d&quot;</span>, speed);</span><br><span class="line">	mciSendStringUtil(cmd, <span class="literal">NULL</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">transparentimage</span><span class="params">(IMAGE* dstimg, <span class="type">int</span> x, <span class="type">int</span> y, IMAGE* srcimg)</span></span><br><span class="line">&#123;</span><br><span class="line">	HDC dstDC = GetImageHDC(dstimg);</span><br><span class="line">	HDC srcDC = GetImageHDC(srcimg);</span><br><span class="line">	<span class="type">int</span> w = srcimg-&gt;getwidth();</span><br><span class="line">	<span class="type">int</span> h = srcimg-&gt;getheight();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// 结构体的第三个成员表示额外的透明度，0 表示全透明，255 表示不透明。</span></span><br><span class="line">	BLENDFUNCTION bf = &#123; AC_SRC_OVER, <span class="number">0</span>, <span class="number">255</span>, AC_SRC_ALPHA &#125;;</span><br><span class="line">	<span class="comment">// 使用 Windows GDI 函数实现半透明位图</span></span><br><span class="line">	AlphaBlend(dstDC, x, y, w, h, srcDC, <span class="number">0</span>, <span class="number">0</span>, w, h, bf);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">change</span><span class="params">()</span> <span class="comment">//实现无边框窗口</span></span><br><span class="line">&#123;</span><br><span class="line">	HWND hnd = GetHWnd();<span class="comment">//获取窗口句柄</span></span><br><span class="line">	SetWindowText(hnd, <span class="string">&quot;玉玉云音乐播放器&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">upTo10s</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> time = getMusicPosition() + <span class="number">10000</span>;</span><br><span class="line">	<span class="keyword">if</span> (time &gt; getMusicLength())</span><br><span class="line">	&#123;</span><br><span class="line">		time = getMusicLength();</span><br><span class="line">	&#125;</span><br><span class="line">	gotoPosition(time);</span><br><span class="line">	playMusic();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">downTo10s</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">int</span> time = getMusicPosition() - <span class="number">10000</span>;</span><br><span class="line">	<span class="keyword">if</span> (time &lt; <span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		time = <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	gotoPosition(time);</span><br><span class="line">	playMusic();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">addVolume</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> vo[<span class="number">20</span>];</span><br><span class="line">	<span class="type">char</span> res[<span class="number">260</span>];</span><br><span class="line">	<span class="type">char</span> file1[<span class="number">100</span>] = <span class="string">&quot;setaudio MyMusic volume to &quot;</span>; <span class="comment">// to后面一定要有空格，不然会报错</span></span><br><span class="line">	</span><br><span class="line">	mciSendString(<span class="string">&quot;status MyMusic volume&quot;</span>, res, <span class="number">260</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="type">int</span> volume = <span class="number">0</span>;</span><br><span class="line">	volume = atoi(res); <span class="comment">// 转化语句</span></span><br><span class="line">	volume += <span class="number">200</span>;</span><br><span class="line">	<span class="keyword">if</span> (volume &gt;= <span class="number">1000</span>)</span><br><span class="line">		volume = <span class="number">1000</span>;</span><br><span class="line">	itoa(volume, vo, <span class="number">10</span>); <span class="comment">//转化语句</span></span><br><span class="line">	<span class="built_in">strcat</span>(file1, vo); <span class="comment">// 将vo接在file1后面</span></span><br><span class="line">	mciSendString(file1, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>); <span class="comment">// 设定成功</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">lowVolume</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> vo[<span class="number">20</span>];</span><br><span class="line">	<span class="type">char</span> res[<span class="number">260</span>];</span><br><span class="line">	<span class="type">char</span> file1[<span class="number">100</span>] = <span class="string">&quot;setaudio MyMusic volume to &quot;</span>; <span class="comment">// to后面一定要有空格，不然会报错</span></span><br><span class="line">	mciSendString(<span class="string">&quot;status MyMusic volume&quot;</span>, res, <span class="number">260</span>, <span class="literal">NULL</span>);</span><br><span class="line">	<span class="type">int</span> volume = <span class="number">0</span>;</span><br><span class="line">	volume = atoi(res); <span class="comment">// 转化语句</span></span><br><span class="line">	volume -= <span class="number">200</span>;</span><br><span class="line">	<span class="keyword">if</span> (volume &lt;= <span class="number">0</span>)</span><br><span class="line">		volume = <span class="number">0</span>;</span><br><span class="line">	itoa(volume, vo, <span class="number">10</span>); <span class="comment">//转化语句</span></span><br><span class="line">	<span class="built_in">strcat</span>(file1, vo); <span class="comment">// 将vo接在file1后面</span></span><br><span class="line">	mciSendString(file1, <span class="number">0</span>, <span class="number">0</span>,<span class="number">0</span>); <span class="comment">// 设定成功</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//集成绝大多数MCI的API指令封装为简单的接口</span></span><br><span class="line"><span class="comment">// mci集成工具集: util.cpp</span></span><br><span class="line"><span class="comment">//</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-5"><p><strong>定义大多数常用头文件（偷懒）：</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Audioclient.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ShlObj.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;conio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdbool&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdlib&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;endpointvolume.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;fstream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;io.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mmdeviceapi.h&gt;</span> </span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;mmsystem.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;strsafe.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;graphics.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment(lib, <span class="string">&quot;winmm.lib&quot;</span>)</span></span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-6"><p><strong>menuPage.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;all.h&quot;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">copyright</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">menu</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p><strong>menuPage.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;menuPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;util.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerWindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;listmenu.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">menu</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> logostatus = <span class="number">0</span>;</span><br><span class="line">    initgraph(<span class="number">640</span>, <span class="number">480</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="comment">//背景图片</span></span><br><span class="line">    IMAGE img1;</span><br><span class="line">    loadimage(&amp;img1, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\mainmenu.png&quot;</span>);</span><br><span class="line">    putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;img1);    </span><br><span class="line"></span><br><span class="line">    IMAGE choice;</span><br><span class="line">    loadimage(&amp;choice, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\menuchoice.png&quot;</span>); </span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="comment">//鼠标操作</span></span><br><span class="line">        <span class="keyword">if</span> (MouseHit()) &#123;</span><br><span class="line">            MOUSEMSG msg = GetMouseMsg();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//显示灰色块块</span></span><br><span class="line">            <span class="keyword">if</span> (msg.x &gt;= <span class="number">369</span> &amp;&amp; msg.x &lt;= <span class="number">583</span> &amp;&amp; msg.y &gt;= <span class="number">69</span> &amp;&amp; msg.y &lt;= <span class="number">160</span> &amp;&amp; logostatus == <span class="number">0</span>) &#123;</span><br><span class="line">                transparentimage(<span class="literal">NULL</span>, <span class="number">369</span>, <span class="number">69</span>, &amp;choice);</span><br><span class="line">                logostatus = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (msg.x &gt;= <span class="number">369</span> &amp;&amp; msg.x &lt;= <span class="number">583</span> &amp;&amp; msg.y &gt;= <span class="number">195</span> &amp;&amp; msg.y &lt;= <span class="number">264</span> &amp;&amp; logostatus == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                transparentimage(<span class="literal">NULL</span>, <span class="number">369</span>, <span class="number">195</span>, &amp;choice);</span><br><span class="line">                logostatus = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (msg.x &gt;= <span class="number">369</span> &amp;&amp; msg.x &lt;= <span class="number">583</span> &amp;&amp; msg.y &gt;= <span class="number">321</span> &amp;&amp; msg.y &lt;= <span class="number">390</span> &amp;&amp; logostatus == <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                transparentimage(<span class="literal">NULL</span>, <span class="number">369</span>, <span class="number">321</span>, &amp;choice);</span><br><span class="line">                logostatus = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;img1);</span><br><span class="line">                logostatus = <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">switch</span> (msg.uMsg)</span><br><span class="line">            &#123;</span><br><span class="line">            <span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (msg.x &gt;= <span class="number">369</span> &amp;&amp; msg.x &lt;= <span class="number">583</span> &amp;&amp; msg.y &gt;= <span class="number">69</span> &amp;&amp; msg.y &lt;= <span class="number">160</span>) &#123;</span><br><span class="line">                    closegraph();</span><br><span class="line">                    createWindow();</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (msg.x &gt;= <span class="number">369</span> &amp;&amp; msg.x &lt;= <span class="number">583</span> &amp;&amp; msg.y &gt;= <span class="number">195</span> &amp;&amp; msg.y &lt;= <span class="number">264</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    closegraph();</span><br><span class="line">                    listmenu();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (msg.x &gt;= <span class="number">369</span> &amp;&amp; msg.x &lt;= <span class="number">583</span> &amp;&amp; msg.y &gt;= <span class="number">321</span> &amp;&amp; msg.y &lt;= <span class="number">390</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    closegraph();</span><br><span class="line">                    copyright();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">copyright</span><span class="params">()</span> &#123;</span><br><span class="line">    initgraph(<span class="number">720</span>,<span class="number">960</span>, <span class="number">0</span>);</span><br><span class="line">    setbkmode(TRANSPARENT);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//背景图片</span></span><br><span class="line">    IMAGE im;</span><br><span class="line">    loadimage(&amp;im, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\copyright.png&quot;</span>);</span><br><span class="line">    putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;im);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//返回按钮</span></span><br><span class="line">    IMAGE back;</span><br><span class="line">    loadimage(&amp;back, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\back.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">    transparentimage(<span class="literal">NULL</span>, <span class="number">15</span>, <span class="number">12</span>, &amp;back);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)<span class="comment">//要用个循环来不断监测鼠标事件</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (MouseHit())</span><br><span class="line">        &#123;</span><br><span class="line">            MOUSEMSG msg = GetMouseMsg();</span><br><span class="line">            <span class="keyword">switch</span> (msg.uMsg)</span><br><span class="line">            &#123;</span><br><span class="line">            <span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line">                <span class="keyword">if</span> (msg.x &gt;= <span class="number">15</span> &amp;&amp; msg.x &lt;= <span class="number">45</span> &amp;&amp; msg.y &lt;= <span class="number">42</span> &amp;&amp; msg.y &gt;= <span class="number">12</span>)<span class="comment">//返回</span></span><br><span class="line">                &#123;</span><br><span class="line">                    closegraph();</span><br><span class="line">                    menu();</span><br><span class="line"></span><br><span class="line">                &#125;<span class="comment">//点击返回</span></span><br><span class="line">                <span class="keyword">if</span> (msg.x &gt;= <span class="number">114</span> &amp;&amp; msg.x &lt;= <span class="number">584</span> &amp;&amp; msg.y &gt;= <span class="number">805</span> &amp;&amp; msg.y &lt;= <span class="number">853</span>) &#123;</span><br><span class="line">                    WinExec(<span class="string">&quot;C:\\Program Files\\Internet Explorer\\IExplore.exe https://github.com/xiao-luo17&quot;</span>, <span class="number">1</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-7"><p><strong>main.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;all.h&quot;</span></span></span><br></pre></td></tr></table></figure>

<p><strong>main.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;main.h&quot;</span></span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	playerPage();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-8"><p><strong>listmenu.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerWindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;menuPage.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">listmenu</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">fundmantual2</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p><strong>listmenu.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&quot;listmenu.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">listmenu</span><span class="params">()</span> </span><br><span class="line">&#123;</span><br><span class="line">	initgraph(<span class="number">640</span>, <span class="number">480</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//背景图片</span></span><br><span class="line">	IMAGE img;</span><br><span class="line">	loadimage(&amp;img, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\musiclist.png&quot;</span>);</span><br><span class="line">	putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//返回图标</span></span><br><span class="line">	IMAGE back;</span><br><span class="line">	loadimage(&amp;back, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\back.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">15</span>, <span class="number">12</span>, &amp;back);</span><br><span class="line">	printList();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//添加图标</span></span><br><span class="line">	IMAGE add1;</span><br><span class="line">	loadimage(&amp;add1, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2;</span><br><span class="line">	loadimage(&amp;add2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">238</span>, <span class="number">284</span>, &amp;add1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//减少图标</span></span><br><span class="line">	IMAGE add1_lr;</span><br><span class="line">	loadimage(&amp;add1_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2_lr;</span><br><span class="line">	loadimage(&amp;add2_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">238</span>, <span class="number">359</span>, &amp;add1_lr);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (MouseHit())</span><br><span class="line">		&#123;</span><br><span class="line">			MOUSEMSG msg = GetMouseMsg();</span><br><span class="line">			<span class="keyword">switch</span> (msg.uMsg)</span><br><span class="line">			&#123;</span><br><span class="line">			<span class="keyword">case</span> WM_LBUTTONDOWN:</span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">15</span> &amp;&amp; msg.x &lt;= <span class="number">45</span> &amp;&amp; msg.y &lt;= <span class="number">42</span> &amp;&amp; msg.y &gt;= <span class="number">12</span>)<span class="comment">//返回</span></span><br><span class="line">				&#123;</span><br><span class="line">					closegraph();</span><br><span class="line">					menu();</span><br><span class="line"></span><br><span class="line">				&#125;<span class="comment">//点击返回</span></span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">238</span> &amp;&amp; msg.x &lt;= <span class="number">278</span> &amp;&amp; msg.y &lt;= <span class="number">324</span> &amp;&amp; msg.y &gt;= <span class="number">284</span>)<span class="comment">//添加</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">92</span>, <span class="number">576</span>, &amp;add2);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">92</span>, <span class="number">576</span>, &amp;add1);</span><br><span class="line">					setnum(getnum() + <span class="number">1</span>);</span><br><span class="line">					add();</span><br><span class="line">					<span class="comment">//设置背景图片</span></span><br><span class="line">					fundmantual2();</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span> (msg.x &gt;= <span class="number">238</span> &amp;&amp; msg.x &lt;= <span class="number">278</span> &amp;&amp; msg.y &lt;= <span class="number">419</span> &amp;&amp; msg.y &gt;= <span class="number">359</span>)<span class="comment">//删除</span></span><br><span class="line">				&#123;</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">612</span>, <span class="number">576</span>, &amp;add2_lr);<span class="comment">//灰色的按钮</span></span><br><span class="line">					Sleep(<span class="number">100</span>);</span><br><span class="line">					transparentimage(<span class="literal">NULL</span>, <span class="number">612</span>, <span class="number">576</span>, &amp;add1_lr);</span><br><span class="line">					<span class="keyword">if</span> (getnum() == getNumOfNode()) &#123;</span><br><span class="line">						setnum(getnum() - <span class="number">1</span>);</span><br><span class="line">						closeMusic();</span><br><span class="line">					&#125;</span><br><span class="line">					del();</span><br><span class="line">					<span class="comment">//设置背景图片</span></span><br><span class="line">					fundmantual2();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">fundmantual2</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	initgraph(<span class="number">640</span>, <span class="number">480</span>, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//背景图片</span></span><br><span class="line">	IMAGE img;</span><br><span class="line">	loadimage(&amp;img, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\musiclist.png&quot;</span>);</span><br><span class="line">	putimage(<span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">0</span>, <span class="number">0</span>, &amp;img);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//返回图标</span></span><br><span class="line">	IMAGE back;</span><br><span class="line">	loadimage(&amp;back, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\back.png&quot;</span>, <span class="number">30</span>, <span class="number">30</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">15</span>, <span class="number">12</span>, &amp;back);</span><br><span class="line">	printList();</span><br><span class="line"></span><br><span class="line">	<span class="comment">//添加图标</span></span><br><span class="line">	IMAGE add1;</span><br><span class="line">	loadimage(&amp;add1, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2;</span><br><span class="line">	loadimage(&amp;add2, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\add2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">238</span>, <span class="number">284</span>, &amp;add1);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//减少图标</span></span><br><span class="line">	IMAGE add1_lr;</span><br><span class="line">	loadimage(&amp;add1_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	IMAGE add2_lr;</span><br><span class="line">	loadimage(&amp;add2_lr, <span class="string">&quot;D:\\visual studio project\\yuyucloudmusic v2.4\\Project_List\\picture\\cut2.png&quot;</span>, <span class="number">40</span>, <span class="number">40</span>);</span><br><span class="line">	transparentimage(<span class="literal">NULL</span>, <span class="number">238</span>, <span class="number">359</span>, &amp;add1_lr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="模块-9"><p><strong>playerPage.h</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;all.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;util.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;FileToList.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;ListPage.h&quot;</span></span></span><br><span class="line"><span class="type">void</span> <span class="title function_">playerPage</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">playerPagePrint</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">upTo10s</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">downTo10s</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">printMusicPosition</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">aboutPagePrint</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">ListPagePrint</span><span class="params">()</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">cls</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<p><strong>playerPage.cpp</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;playerWindow.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;menuPage.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">pragma</span> comment( lib, <span class="string">&quot;MSIMG32.LIB&quot;</span>)</span></span><br><span class="line">using namespace <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">playerPage</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	menu();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="http://example.com">Xiao Luo</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2022/07/18/C%E5%AE%9E%E7%8E%B0%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/">http://example.com/2022/07/18/C实现音乐播放器/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">小罗の小窝</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/C-C/">C/C++</a><a class="post-meta__tags" href="/tags/%E5%B0%8F%E9%A1%B9%E7%9B%AE/">小项目</a></div><div class="post_share"><div class="social-share" data-image="/img/Random(38).jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/29/Git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(17).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Git常用指令</div></div></a></div><div class="next-post pull-right"><a href="/2022/07/05/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%84%8F%E4%B9%89/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(34).jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">个人博客的意义</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/07/02/%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" title="经典排序算法"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(36).jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-02</div><div class="title">经典排序算法</div></div></a></div><div><a href="/2022/06/10/JavaPlaneGame%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98/" title="Java飞机大战小游戏"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(35).jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-10</div><div class="title">Java飞机大战小游戏</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Xiao Luo</div><div class="author-info__description">Welcome here!</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">12</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">9</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xiao-luo17"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xiao-luo17" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:452966434@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://space.bilibili.com/161851456?spm_id_from=333.1007.0.0" target="_blank" title="BiliBili"><i class="fa-brands fa-bilibili"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">由于Fluid主题更改配置有些麻烦，页面排版过于简洁，现在主题改为Butterfly。<br/>但仍然保留Fluid主题的备份站点</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8F%96%E5%90%8D%E5%AD%97-%E7%8E%89%E7%8E%89%E4%BA%91%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8"><span class="toc-number">1.</span> <span class="toc-text">取名字: 玉玉云音乐播放器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E9%9C%80%E6%B1%82"><span class="toc-number">1.1.</span> <span class="toc-text">项目需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E8%AE%B0%E5%BD%95"><span class="toc-number">1.2.</span> <span class="toc-text">项目记录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80"><span class="toc-number">1.3.</span> <span class="toc-text">项目基础</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">1.4.</span> <span class="toc-text">设计思路</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#UI%E8%83%8C%E5%90%8E%E7%9A%84%E9%80%BB%E8%BE%91%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.1.</span> <span class="toc-text">UI背后的逻辑问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#mci%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">1.4.1.1.1.</span> <span class="toc-text">mci函数参数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MCI%E5%91%BD%E4%BB%A4"><span class="toc-number">1.4.1.1.2.</span> <span class="toc-text">MCI命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B0%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9B%B8%E4%BA%92%E6%8B%BC%E6%8E%A5%E4%BA%A7%E7%94%9F%E5%8F%AF%E4%BB%A5%E8%A2%AB%E7%B3%BB%E7%BB%9F%E7%90%86%E8%A7%A3%E7%9A%84MCI%E6%8C%87%E4%BB%A4"><span class="toc-number">1.4.1.1.3.</span> <span class="toc-text">将字符串相互拼接产生可以被系统理解的MCI指令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BC%E5%87%BA%E6%96%87%E4%BB%B6%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E5%99%A8%E5%AE%9E%E7%8E%B0%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E5%B9%B6%E5%AD%98%E6%94%BE%E5%88%B0%E6%8C%87%E5%AE%9A%E9%93%BE%E8%A1%A8%E8%8A%82%E7%82%B9"><span class="toc-number">1.4.1.1.4.</span> <span class="toc-text">呼出文件资源管理器实现读取文件路径并存放到指定链表节点</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%92%AD%E6%94%BE%E4%BF%A1%E6%81%AF%E5%92%8C%E6%92%AD%E6%94%BE%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.4.1.1.5.</span> <span class="toc-text">获取播放信息和播放位置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#alias%E5%88%AB%E5%90%8D"><span class="toc-number">1.4.1.1.6.</span> <span class="toc-text">alias别名</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E4%BA%9B%E9%9A%BE%E7%82%B9%EF%BC%88%E8%AE%B8%E6%98%AF%E5%A4%AA%E8%8F%9C%E4%BA%86%EF%BC%89"><span class="toc-number">1.4.2.</span> <span class="toc-text">一些难点（许是太菜了）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-1"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E7%BC%93%E5%86%B2%E5%8E%9F%E7%90%86%E6%9C%89%E4%BA%9B%E5%A4%8D%E6%9D%82%EF%BC%8C%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8%E4%B8%80%E4%B8%AA%E6%9B%B4%E7%AE%80%E5%8D%95%E7%9A%84%E6%96%B9%E6%A1%88"><span class="toc-number">1.4.2.1.1.</span> <span class="toc-text">双缓冲原理有些复杂，命令行使用一个更简单的方案</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#MCI%E6%96%87%E4%BB%B6%E8%B7%AF%E5%BE%84%E7%A9%BA%E6%A0%BC%E9%97%AE%E9%A2%98"><span class="toc-number">1.4.2.1.2.</span> <span class="toc-text">MCI文件路径空格问题</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%BC%8F%E5%AF%BC%E5%85%A5%E6%96%87%E4%BB%B6%E5%92%8Ceasyx%E7%95%8C%E9%9D%A2%E5%88%B7%E6%96%B0%E5%86%B2%E7%AA%81"><span class="toc-number">1.4.2.1.3.</span> <span class="toc-text">对话框式导入文件和easyx界面刷新冲突</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BC%AA%E9%80%A0%E6%8C%89%E9%92%AE%E7%89%B9%E6%95%88"><span class="toc-number">1.4.2.1.4.</span> <span class="toc-text">伪造按钮特效</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9B%E5%BA%A6%E6%9D%A1%E7%9A%84%E5%88%B6%E4%BD%9C"><span class="toc-number">1.4.2.1.5.</span> <span class="toc-text">进度条的制作</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.5.</span> <span class="toc-text">模块化设计</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/07/29/bat%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC/" title="使用.bat批处理脚本简化命令行流程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(18).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用.bat批处理脚本简化命令行流程"/></a><div class="content"><a class="title" href="/2022/07/29/bat%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC/" title="使用.bat批处理脚本简化命令行流程">使用.bat批处理脚本简化命令行流程</a><time datetime="2022-07-29T14:22:05.532Z" title="发表于 2022-07-29 22:22:05">2022-07-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/29/Git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" title="Git常用指令"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(17).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Git常用指令"/></a><div class="content"><a class="title" href="/2022/07/29/Git%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4/" title="Git常用指令">Git常用指令</a><time datetime="2022-07-29T13:30:30.585Z" title="发表于 2022-07-29 21:30:30">2022-07-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/18/C%E5%AE%9E%E7%8E%B0%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/" title="C/C++实现的音乐播放器"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(38).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="C/C++实现的音乐播放器"/></a><div class="content"><a class="title" href="/2022/07/18/C%E5%AE%9E%E7%8E%B0%E9%9F%B3%E4%B9%90%E6%92%AD%E6%94%BE%E5%99%A8/" title="C/C++实现的音乐播放器">C/C++实现的音乐播放器</a><time datetime="2022-07-18T12:46:25.000Z" title="发表于 2022-07-18 20:46:25">2022-07-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/05/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%84%8F%E4%B9%89/" title="个人博客的意义"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(34).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="个人博客的意义"/></a><div class="content"><a class="title" href="/2022/07/05/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%84%8F%E4%B9%89/" title="个人博客的意义">个人博客的意义</a><time datetime="2022-07-05T12:46:25.000Z" title="发表于 2022-07-05 20:46:25">2022-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/07/02/%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" title="经典排序算法"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/Random(36).jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="经典排序算法"/></a><div class="content"><a class="title" href="/2022/07/02/%E7%BB%8F%E5%85%B8%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95/" title="经典排序算法">经典排序算法</a><time datetime="2022-07-02T12:46:25.000Z" title="发表于 2022-07-02 20:46:25">2022-07-02</time></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Xiao Luo</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text"><b><em>你好呀，欢迎光临</em></b></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-phi-fawn.vercel.app/',
      region: 'ap-shanghai',
      onCommentLoaded: function () {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo-phi-fawn.vercel.app/',
      region: 'ap-shanghai',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      countELement.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const runFn = () => {
    init()
    
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') {
      setTimeout(runFn,0)
      return
    } 
    getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(runFn)
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script src="/iconfont/font_01/iconfont.js"></script><script src="/js/sakura.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>